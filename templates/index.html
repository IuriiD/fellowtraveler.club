{% extends "layout.html" %}
{% from '_formhelpers.html' import render_field %}

{% block title %}
    Teddygo - please help me to realize my dream
{% endblock %}

{% block inhead %}
    {# reCaptcha #}
    <script src='https://www.google.com/recaptcha/api.js'></script>
    {{ teddy_locations.js }}
{% endblock %}

{% block body %}

    <!--
    <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1UgBsp0NYrSmBzBrUzAnucKhaywY" width="750" height="540"></iframe>

    <a class="twitter-timeline" href="https://twitter.com/SpaceX?ref_src=twsrc%5Etfw">Tweets by SpaceX</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    -->
    {% if locations_history|length>0 %}
        <div>
            <b>My travel so far:</b>
        </div>
        <div>
            {{ teddy_locations.html }}
        </div>
        <div>
            {% for location_data in locations_history %}
                <p>
                    Author: {{ location_data.author }}
                    <br>
                    Time: {{ location_data.time }}
                    <br>
                    Location: {{ location_data.location }}
                    {% if location_data.photos|length>0 %}
                        <br>
                        Photos:
                            {% for photo in location_data.photos %}
                                <br>
                                <img src='static/{{ photo }}' class="img-fluid rounded" style="max-width: 750px;">
                            {% endfor %}
                    {% endif %}
                </p>
            {% endfor %}
        </div>
    {% endif %}


    <form role="form" action="/" method="POST" enctype="multipart/form-data">
        <dl>
            {{ whereisteddynowform.csrf_token }}
            {{ render_field(whereisteddynowform.author) }}
            {{ render_field(whereisteddynowform.location) }}
            <div>
                <b>Upload a photo (up to 4 shots)</b>
                <p>
                    <input type="file" accept="image/*" name="photo" id="photo" multiple>
                </p>
            </div>
            {{ render_field(whereisteddynowform.comment) }}
            {{ render_field(whereisteddynowform.secret_code) }}
            {# { render_field(whereisteddynowform.recaptcha) } #}
            <br>
            {{ whereisteddynowform.submit(class_="btn btn-primary") }}
        </dl>
    </form>
{% endblock %}