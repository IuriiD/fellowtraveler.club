{% extends "layout.html" %}
{% from '_formhelpers.html' import render_field %}

{% block title %}
    {{ gettext('Hi! My name is Teddy and I have a dream') }}
{% endblock %}

{% block inhead %}
    {# JSGlue for using url_for in jQuery #}
    {{ JSGlue.include() }}

    {# Stylesheet for the Google map with autocomplete field to ented address #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/google.maps.autocomplete.css') }}">

    {# reCaptcha script #}
    <script src='https://www.google.com/recaptcha/api.js'></script>

    {# JS to display Teddy's travel so far #}
    {{ teddy_map.js }}
{% endblock %}


{% block headersubscribe4updates %}
    <form role="form" action="/subscribe" method="POST">
        <dl>
            {{ whereisteddynowform.csrf_token }}
            {{ render_field(subscribe2updatesform.email4updates) }}
            {{ subscribe2updatesform.emailsubmit(class_="btn btn-primary") }}
        </dl>
    </form>
{% endblock %}


{% block travelmap %}
    <!--
    <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1UgBsp0NYrSmBzBrUzAnucKhaywY" width="750" height="540"></iframe>
    -->
    <div>
        {{ teddy_map.html }}
    </div>
{% endblock %}

{% block traveltimeline %}
    {% if locations_history|length>0 %}
        <div>
            {% for location_data in locations_history %}
                <p>
                    {{ gettext('Author') }}: {{ location_data.author }}
                    <br>
                    {{ gettext('Time') }}: {{ location_data.time }}
                    <br>
                    {{ gettext('Location') }}: {{ location_data.location }}
                    {% if location_data.photos|length>0 %}
                        <br>
                        {{ gettext('Photos') }}:
                            {% for photo in location_data.photos %}
                                <br>
                                <img src='static/{{ photo }}' class="img-fluid rounded" style="max-width: 700px;">
                            {% endfor %}
                    {% endif %}
                </p>
                <hr>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}

{% block updatelocation %}
    <a name="updatelocation"><b>{{ gettext('Where Teddy is now or was on the photo? (required)') }}</b></a>
    <div>
        <input id="pac-input" />
        <div id="map" height="400" width="700"></div>
    </div>

    <br>
    <form role="form" action="/" method="POST" enctype="multipart/form-data">
        <dl>
            {{ whereisteddynowform.csrf_token }}
            {{ render_field(whereisteddynowform.author) }}
            <div>
                <b>{{ gettext('Upload up to 4 photos/place') }}</b>
                <p>
                    <input type="file" accept="image/*" name="photo" id="photo" multiple>
                </p>
            </div>
            {{ render_field(whereisteddynowform.comment) }}
            {{ render_field(whereisteddynowform.email4updates) }}
            {{ render_field(whereisteddynowform.secret_code) }}
            {# { render_field(whereisteddynowform.recaptcha) } #}
            <br>
            {{ whereisteddynowform.submit(class_="btn btn-primary") }}
        </dl>
    </form>
{% endblock %}


{% block footersubscribe4updates %}
    <form role="form" action="/subscribe" method="POST">
        <dl>
            {{ whereisteddynowform.csrf_token }}
            {{ render_field(subscribe2updatesform.email4updates) }}
            {{ subscribe2updatesform.emailsubmit(class_="btn btn-primary") }}
        </dl>
    </form>
{% endblock %}
